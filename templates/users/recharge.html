{% extends "users/base.html" %}
{% load static i18n %}
{% load thumbnail currency_filters sum_tags %}

 
{% block content %}
<div class="body-wrapper">
	<div class="main-wrapper">
		<div class="page-wrapper full-page-wrapper">
			<main>
				<div>
					<div class="mdc-layout-grid__inner">
						<div class="mdc-layout-grid__cell stretch-card mdc-layout-grid__cell--span-12">
							<div class="mdc-card p-0">
								<section style="padding: 30px 30px 20px 30px;" class="error-header">
									<h1>{% trans "Recharge Now" %}</h1>
									<p>{% trans 'here you can recharge Mobile' %}</p>
								</section>
								<section>
									<div class="mdc-layout-grid__cell--span-12 mdc-layout-grid__cell--span-6-desktop stretch-card">
										<div class="mdc-card">
											<p>Recharge Credit Limit: {{ request.user.recharge_limit|currency }}</p>
											<p>This Month Recharge Credit Limit Left: {% if request.user.recharge_limit > 250 %}{% sub 250 request.user.recharge_limit_used as rcll %}{{ rcll|currency }}{% else %}INR 0{% endif %}</p>

											{% if operator == '' %}
											<form method="POST" action="/wallet/mobile-no/" class="template-demo">
												{% csrf_token %}
												<div class="mdc-layout-grid__inner">
													<div class="mdc-layout-grid__cell stretch-card mdc-layout-grid__cell--span-6-desktop">
														<div class="mdc-text-field mdc-text-field--outlined">
															<input name="mobile" class="mdc-text-field__input" id="text-field-hero-input">
															<div class="mdc-notched-outline">
																<div class="mdc-notched-outline__leading"></div>
																<div class="mdc-notched-outline__notch">
																	<label for="text-field-hero-input" class="mdc-floating-label">Mobile
																	</label>
																</div>
																<div class="mdc-notched-outline__trailing"></div>
															</div>
														</div>
													</div>
													<div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-6-desktop stretch-card">
									                  <div class="template-demo">
									                    <div class="mdc-select demo-width-class" data-mdc-auto-init="MDCSelect">
									                      <input type="hidden" name="operator">
									                      <i class="mdc-select__dropdown-icon"></i>
									                      <div class="mdc-select__selected-text"></div>
									                      <div class="mdc-select__menu mdc-menu-surface demo-width-class">
									                        <ul class="mdc-list">
									                          <li class="mdc-list-item mdc-list-item--selected" data-value="" aria-selected="true">
									                          </li>
									                          <li class="mdc-list-item" data-value="Airtel">
									                            Airtel
									                          </li>
									                          <li class="mdc-list-item" data-value="Jio">
									                            Jio
									                          </li>
									                          <li class="mdc-list-item" data-value="Vodafone">
									                            Vodafone
									                          </li>
									                          <li class="mdc-list-item" data-value="Idea">
									                            Idea
									                          </li>
									                        </ul>
									                      </div>
									                      <span class="mdc-floating-label">Choose Operator</span>
									                      <div class="mdc-line-ripple"></div>
									                    </div>
									                </div>
									                <br>
									            </div>
									        </div>
									            <input type="hidden" name="circle" value="All Circles">
												<button type="submit" class="mdc-button mdc-button--raised w-100">
													View Plans
												</button>
												{{ message }}
											</form>
										</div>
									</div>
									<div class="mdc-layout-grid__cell stretch-card mdc-layout-grid__cell--span-12">
						                <div class="mdc-card p-0">
						                  <h6 class="card-title card-padding pb-0">Recharges</h6>
						                  <div class="table-responsive">
						                    <table class="table">
						                      <thead>
						                        <tr>
						                          <th>Mobile</th>
						                          <th>Amount</th>
						                          <th>Date</th>
						                          <th>Status</th>
						                          <th>Txn ID</th>
						                        </tr>
						                      </thead>
						                      <tbody>
												{% for recharge in recharges %}
						                        <tr>
						                          <td>{{ recharge.mobile_number }}</td>
						                          <td>{{ recharge.amount }}</td>
						                          <td>{{ recharge.created_at }}</td>
						                          <td>{{ recharge.status }}</td>
						                          <td>{{ recharge.order_id }}</td>
						                        </tr>
												{% endfor %}
												</tbody>
											</table>
										</div>
										</div>
									</div>
									<div class="mdc-layout-grid__cell--span-12 mdc-layout-grid__cell--span-6-desktop stretch-card">
										<div class="mdc-card">
											<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
											<ins class="adsbygoogle"
											style="display:block"
											data-ad-format="fluid"
											data-ad-layout-key="-6t+ed+2i-1n-4w"
											data-ad-client="ca-pub-2476399156226109"
											data-ad-slot="6614818154"></ins>
											<script>
												(adsbygoogle = window.adsbygoogle || []).push({});
											</script>
											{% endif %}
											{% if operator != '' %}
											<form method="POST" action="/wallet/recharge/" class="template-demo">
												{% csrf_token %}
												<p>Enter Amount</p>
												<div class="mdc-layout-grid__inner">
													<div class="mdc-layout-grid__cell stretch-card mdc-layout-grid__cell--span-6-desktop">
														<div class="mdc-text-field mdc-text-field--outlined">
															<input name="amount" value="" class="mdc-text-field__input" id="amount" required placeholder="Amount">
															<input type="hidden" value="{{ mobile }}" name="mobile">
															<input type="hidden" value="{{ operator }}" name="operator">
															<input type="hidden" value="1" name="type">
															<div class="mdc-notched-outline">
																<div class="mdc-notched-outline__leading"></div>
																<div class="mdc-notched-outline__trailing"></div>
															</div>
														</div>
													</div>
												</div>
												{{ message }}
												<button type="submit" class="mdc-button mdc-button--raised w-100">
													Recharge Now
												</button>
											</form>
											{% endif %}
										</div>
									</div>
									<div class="mdc-layout-grid__cell--span-12 mdc-layout-grid__cell--span-6-desktop stretch-card">
										<div class="mdc-card">
											<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
											<ins class="adsbygoogle"
											style="display:block"
											data-ad-format="fluid"
											data-ad-layout-key="-6t+ed+2i-1n-4w"
											data-ad-client="ca-pub-2476399156226109"
											data-ad-slot="6614818154"></ins>
											<script>
												(adsbygoogle = window.adsbygoogle || []).push({});
											</script>
										</div>
										<!-- <p>{{ recharge.resText }}</p> -->
									</div>
									{% if operator != '' %}

									<div class="mdc-layout-grid__cell stretch-card mdc-layout-grid__cell--span-6-desktop mdc-layout-grid__cell--span-4-tablet">
										<div   style="padding: 32px 0px;" class="mdc-card bg-white text-white">
											<div class="d-flex justify-content-between">
												<h3 style="color: black; font-size: 20px; padding-left: 1.5em;">Recharge Plans</h3><br>
												<p style="color: #030cc7; font-weight: bold;" class="tx-10"></p>
											</div>
											<div style="overflow-x: visible; padding-left: 2em;" class="table-responsive">
												<script>
													function updateValue(val, event) {
														document.getElementById("amount").value = val;
														event.preventDefault();
													}
												</script>
												<table>
													<tbody>
														{% for plan in getplans %}
															<tr>
																<a href="#" title="{{ plan.mrp }}" onclick="updateValue(this.title, event);"><tr style="color: green; font-size: 12px; padding-left: 0px;     border-bottom: 1px solid #0000004a;" id="technician"> â‚¹ {{ plan.mrp }}

																	<p style="color: grey; font-size: 8px; margin-block-end: auto;">Validity: {{ plan.validity }} Circle: {{ plan.circle }}</p>

																	<p style="color: black; font-size: 10px; width: 90%;">
																	{{ plan.description }}</p>
																</tr></a>
															</tr>
														{% endfor %}
													</tbody>
												</table>
											</div>
										</div>
									</div>
									<div class="mdc-layout-grid__cell--span-12 mdc-layout-grid__cell--span-6-desktop stretch-card">
										<div class="mdc-card">
											<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
											<ins class="adsbygoogle"
											style="display:block"
											data-ad-format="fluid"
											data-ad-layout-key="-6t+ed+2i-1n-4w"
											data-ad-client="ca-pub-2476399156226109"
											data-ad-slot="6614818154"></ins>
											<script>
												(adsbygoogle = window.adsbygoogle || []).push({});
											</script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
											<ins class="adsbygoogle"
											style="display:block"
											data-ad-format="fluid"
											data-ad-layout-key="-6t+ed+2i-1n-4w"
											data-ad-client="ca-pub-2476399156226109"
											data-ad-slot="6614818154"></ins>
											<script>
												(adsbygoogle = window.adsbygoogle || []).push({});
											</script>
										</div>
									</div>
								</div>
								{% endif %}
							</section>
						</div>
					</div>
				</div>
			</div>
		</main>
	</div>
</div>
</div>
{% endblock content %}